# Settings for Backend (on Cloud Run).
# See https://firebase.google.com/docs/app-hosting/configure#cloud-run
runConfig:
  minInstances: 0
  maxInstances: 10
  concurrency: 80
  cpu: 1
  memoryMiB: 512

# Configuration for the build process
build:
  docker:
    dockerfilePath: Dockerfile # Use the Dockerfile in this directory
    context: . # Use the current directory (ailbee-web-app/backend) as the build context

# Environment variables and secrets.
env: # <--- Correct env syntax
  # Configure environment variables.
  # See https://firebase.google.com/docs/app-hosting/configure#user-defined-environment
  - variable: GCP_PROJECT_ID # Add this based on your backend code
    value: "ailbee"
    availability:
      - BUILD
      - RUNTIME
  - variable: GCP_LOCATION # Add this based on your backend code
    value: "us-central1" # Ensure this matches your desired region
    availability:
      - BUILD
      - RUNTIME
  - variable: GCS_BUCKET_NAME
    value: "firebaseapphosting-sources-991527374957-us-central1"
    availability:
      - BUILD
      - RUNTIME
  - variable: CORS_ALLOWED_ORIGINS # Add this based on your backend code
    value: "https://ailbee.web.app,http://localhost:3000" # Ensure this is correct
    availability:
      - BUILD
      - RUNTIME
  
  # - variable: MESSAGE
  #   value: Hello world!
  #   availability:
  #     - BUILD
  #     - RUNTIME

  # Grant access to secrets in Cloud Secret Manager.
  # See https://firebase.google.com/docs/app-hosting/configure#secret-parameters
  # - variable: MY_SECRET
  #   secret: mySecretRef